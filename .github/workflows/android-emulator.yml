name: Android Tests

on:
  workflow_dispatch:

jobs:
  android-test:
    runs-on: ubuntu-latest
    steps:
      - name: Setup Java
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '21'

      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y adb wget unzip

      - name: Setup Android SDK
        uses: android-actions/setup-android@v3

      - name: Start Emulator
        run: |
          echo "Starting emulator..."
          nohup $ANDROID_HOME/emulator/emulator -avd emulator -no-window -no-audio -no-boot-anim -gpu swiftshader_indirect &
          adb wait-for-device
          adb devices
